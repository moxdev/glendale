function buildMap(e,t){function a(e,t){var a=new google.maps.InfoWindow({content:'<div id="content"><h2 id="firstHeading" class="firstHeading">The Glendale</h2></div>'});commMarker=new google.maps.Marker({position:{lat:39.156403,lng:-77.201815},map:map,zIndex:1e3,animation:google.maps.Animation.DROP,icon:iconPath+"static-comm-marker.png"}),commMarker.addListener("click",function(){a.open(map,commMarker)})}function n(e){e.addListener("click",function(){infowindow=new google.maps.InfoWindow,null!==currentInfoWindow&&currentInfoWindow.close(),currentInfoWindow=infowindow,infowindow.setContent(e.html),infowindow.open(map,e)})}if(bounds=new google.maps.LatLngBounds,addCommMarker){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState&&200===o.status){var e=JSON.parse(o.responseText),t=Number(e.acf.latitude),n=Number(e.acf.longitude);a(t,n)}},o.open("GET",t,!0),o.send()}var s=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels",stylers:[{visibility:"off"}]}];map=new google.maps.Map(document.getElementById("map-canvas"),{mapTypeControl:!1,scrollwheel:!1,panControl:!1,rotateControl:!1,streetViewControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_BOTTOM},styles:s});for(var i=0;i<e.length;i++){var r=e[i].title.rendered,l=e[i].acf.address,c=e[i].acf.address_2,d=e[i].acf.phone,m=e[i].acf.website,p=e[i].acf.additional_details,u=e[i].acf.latitude,g=e[i].acf.longitude,f="cat-"+e[i].landmark_types[0];r=""!==r?'<strong class="window-heading">'+r+"</strong>":"",l=""!==l?"<br>"+l:"",c=""!==c?"<br>"+c:"",d=""!==d?"<br>"+d:"",m=""!==m?'<br><a target="_blank" href="'+m+'">Website &raquo;</a>':"",p=""!==p?"<br><br>"+p:"",locations.push([i,r,u,g,l,c,d,m,p,f])}for(var v=0;v<locations.length;v++){var h=iconPath+locations[v][9]+".png",w=new google.maps.Marker({position:new google.maps.LatLng(locations[v][2],locations[v][3]),map:map,icon:h,html:'<strong class="heading">'+locations[v][1]+"</strong>"+locations[v][4]+locations[v][5]+locations[v][6]+locations[v][7]+locations[v][8]});markers.push(w),bounds.extend(w.getPosition()),n(w)}map.fitBounds(bounds)}function buildCats(e,t){function a(e,t){e.addEventListener("click",function(e){e.preventDefault(),infowindow&&infowindow.close();for(var a=this.parentElement.getAttribute("id"),n=0;n<locations.length;n++)locations[n][9]===a?(markers[n].setVisible(!0),markers[n].setOptions({zIndex:1100})):locations[n][9]!==a&&markers[n].setVisible(!1);var o=[];o=t.children;for(var s=0;s<o.length;s++)o[s].firstChild.classList.remove("active");this.classList.add("active"),resetBtn.classList.add("active")})}var n=document.getElementById(t).parentNode;n.appendChild(catNav,document.getElementById(t));var o=document.createElement("ul");catNav.appendChild(o);for(var s=0;s<e.length;s++)if(e[s].count>0){var i=document.createElement("li");i.id="cat-"+e[s].id,i.classList.add(e[s].slug);var r=document.createElement("a");r.href="#",r.innerHTML=catCount?'<span class="count">'+e[s].count+"</span>"+e[s].name:e[s].name,i.appendChild(r),o.appendChild(i),a(r,o)}}function initMap(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status?(landmarksObj=JSON.parse(t.responseText),document.getElementById("map-canvas").innerHTML="",buildMap(landmarksObj,locationOptionsFeed)):document.getElementById("map-canvas").innerHTML="Error Loading Data"},t.open("GET",e,!0),t.send(),document.getElementById("map-canvas").innerHTML="Loading map..."}function initCats(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&200===t.status&&(catsObj=JSON.parse(t.responseText),buildCats(catsObj,myMap))},t.open("GET",e,!0),t.send()}function callback(){initMap(markersFeed),addCats&&initCats(catsFeed)}function resetMap(e,t){for(var a=0;a<locations.length;a++)markers[a].setVisible(!0);e.fitBounds(bounds),infowindow&&infowindow.close();for(var n=catNav.children[0].childNodes,o=0;o<n.length;o++)n[o].firstChild.classList.remove("active");t.classList.remove("active")}var myMap="map-canvas",apiKey="AIzaSyDqcS80RSqBcZepAEhhxKHkSzYLZeNI0Ho",markersFeed="http://localhost:8888/glendale/wp-json/wp/v2/area_landmarks?per_page=100",addCats=!0,catCount=!1,catsFeed="http://localhost:8888/glendale/wp-json/wp/v2/landmark_types",addCommMarker=!0,locationOptionsFeed="http://localhost:8888/glendale/wp-json/acf/v2/options",iconPath="http://localhost:8888/glendale/wp-content/themes/glendale/imgs/",map,commMarker,bounds,infowindow,currentInfoWindow=null,landmarksObj,catsObj,markers=[],locations=[],resetBtn=document.getElementById("reset-map");document.addEventListener("DOMContentLoaded",function(){if(document.getElementById(myMap)){var e;e=document.querySelector("html").lang?document.querySelector("html").lang:"en";var t=document.createElement("script");t.type="text/javascript",t.src="https://maps.googleapis.com/maps/api/js?key="+apiKey+"&callback=callback&language="+e,document.getElementsByTagName("body")[0].appendChild(t)}});var catNav=document.createElement("nav");catNav.id="map-nav",resetBtn.addEventListener("click",function(){resetMap(map,this)});